<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>ç¬¬äºŒé—œ é»æ“Šç“¶å­ä½œç­”</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      background-color: #e0f7fa;
      background-image: url("images/bg03.jpeg");
      background-size: cover;
      background-position: center;
      text-align: center;
      color: #fff;
    }

    h1 {
      margin-top: 30px;
      color: #ffffff;
      text-shadow: 1px 1px 4px #000;
    }

    .bottle-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      padding: 40px;
    }

    .bottle {
      width: 80px;
      height: 120px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .bottle:hover {
      transform: scale(1.1);
    }

    #result {
      font-size: 24px;
      margin-top: 20px;
      color: #fff;
      font-weight: bold;
      text-shadow: 1px 1px 2px #000;
    }

    #restartButton,
    #nextButton,
    #musicToggle {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      color: white;
    }

    #restartButton, #nextButton {
      display: none;
      background-color: #00796b;
    }

    #nextButton {
      background-color: #ff9800;
      margin-left: 10px;
    }

    #musicToggle {
      background-color: #3f51b5;
      position: fixed;
      top: 20px;
      right: 20px;
    }
  </style>
</head>
<body>
  <h1>ğŸ’§ ç¬¬äºŒé—œ æ°´è³‡æºå•ç­”</h1>
  <p>é»æ“Šæ¯å€‹ç“¶å­é€²è¡Œä½œç­”ï¼Œå…± 7 é¡Œï¼Œç­”å° 4 é¡Œä»¥ä¸Šå³éé—œ</p>
  <div class="bottle-container" id="bottleContainer"></div>
  <div id="result"></div>
  <button id="restartButton" onclick="startGame()">é‡æ–°é–‹å§‹</button>
  <button id="nextButton" onclick="location.href='GAME3.html'">ä¸‹ä¸€é—œ</button>
  <button id="musicToggle">ğŸ”Š éŸ³æ¨‚é–‹</button>

  <!-- èƒŒæ™¯éŸ³æ¨‚ -->
  <audio id="backgroundMusic" src="music1.mp3" preload="auto" loop autoplay></audio>

  <script>
    const questions = [
      {
        question: "ä¸‹åˆ—å“ªä¸€é …æ˜¯ç¯€ç´„ç”¨æ°´çš„æ–¹æ³•ï¼Ÿ",
        options: [
          { text: "æ¯æ¬¡æ´—æ‰‹éƒ½ä¸é—œæ°´é¾é ­", correct: false },
          { text: "æ´—æ¾¡æ™‚æ¸›å°‘ç”¨æ°´æ™‚é–“", correct: true },
          { text: "å°‡æ´—èœæ°´ç›´æ¥å€’æ‰", correct: false }
        ]
      },
      {
        question: "åœ°çƒä¸Šç´„æœ‰å¤šå°‘æ°´æ˜¯å¯ä¾›äººé¡ç›´æ¥ä½¿ç”¨çš„æ·¡æ°´ï¼Ÿ",
        options: [
          { text: "97%", correct: false },
          { text: "10%", correct: false },
          { text: "å°‘æ–¼ 1%", correct: true }
        ]
      },
      {
        question: "å“ªä¸€ç¨®æ°´è³‡æºå›æ”¶æ–¹å¼å¯ä»¥é‡è¤‡ä½¿ç”¨æ°´ï¼Ÿ",
        options: [
          { text: "å°‡é›¨æ°´æ”¶é›†ç”¨ä¾†æ¾†èŠ±", correct: true },
          { text: "å°‡æ´—è¡£æ°´ç›´æ¥æ’å…¥æ²³å·", correct: false },
          { text: "ç”¨ç“¶è£æ°´æ´—è¡£æœ", correct: false }
        ]
      },
      {
        question: "åœ¨ç¼ºæ°´åœ°å€ï¼Œå“ªç¨®åšæ³•å¯ä»¥æ”¹å–„é£²ç”¨æ°´å•é¡Œï¼Ÿ",
        options: [
          { text: "æŠŠæµ·æ°´ç…®æ²¸å–æ‰", correct: false },
          { text: "ä½¿ç”¨å¤ªé™½èƒ½æ·¨æ°´å™¨", correct: true },
          { text: "æŒ–æ›´æ·±çš„äº•", correct: false }
        ]
      },
      {
        question: "æ°´è³‡æºæ±™æŸ“çš„ä¸»è¦åŸå› ä¹‹ä¸€æ˜¯ï¼Ÿ",
        options: [
          { text: "æ¤æ¨¹é€ æ—", correct: false },
          { text: "å·¥æ¥­å»¢æ°´æ’å…¥æ²³å·", correct: true },
          { text: "é£²ç”¨ç¤¦æ³‰æ°´", correct: false }
        ]
      },
      {
        question: "SDG 6 çš„æ ¸å¿ƒç›®æ¨™æ˜¯ä»€éº¼ï¼Ÿ",
        options: [
          { text: "æé«˜æ°´åƒ¹è³ºéŒ¢", correct: false },
          { text: "ç¢ºä¿æ‰€æœ‰äººéƒ½èƒ½ç²å¾—ä¹¾æ·¨çš„æ°´èˆ‡è¡›ç”Ÿè¨­æ–½", correct: true },
          { text: "å»ºé€ æ›´å¤šæ¸¸æ³³æ± ", correct: false }
        ]
      },
      {
        question: "ç‚ºä»€éº¼æˆ‘å€‘è¦æ„›æƒœæ°´è³‡æºï¼Ÿ",
        options: [
          { text: "å› ç‚ºæ°´å¯ä»¥å…è²»å–å¾—", correct: false },
          { text: "å› ç‚ºåœ°çƒæ°´è³‡æºæ˜¯ç„¡é™çš„", correct: false },
          { text: "å› ç‚ºæ°´æ˜¯ç”Ÿæ´»èˆ‡å¥åº·ä¸å¯æˆ–ç¼ºçš„è³‡æº", correct: true }
        ]
      }
    ];

    let answered = [];
    let score = 0;
    const hoverSound = new Audio("https://www.soundjay.com/buttons/sounds/button-16.mp3");
    const backgroundMusic = document.getElementById("backgroundMusic");
    const musicToggleBtn = document.getElementById("musicToggle");

    // å˜—è©¦å¼·åˆ¶æ’­æ”¾éŸ³æ¨‚ï¼ˆå¯èƒ½è¢«ç€è¦½å™¨é˜»æ“‹ï¼‰
    window.addEventListener("load", () => {
      const playPromise = backgroundMusic.play();
      if (playPromise !== undefined) {
        playPromise.catch((error) => {
          console.warn("ç€è¦½å™¨å¯èƒ½é˜»æ­¢äº†è‡ªå‹•æ’­æ”¾:", error);
        });
      }
    });

    // éŸ³æ¨‚é–‹é—œæŒ‰éˆ•é‚è¼¯
    musicToggleBtn.addEventListener("click", () => {
      if (backgroundMusic.paused) {
        backgroundMusic.play();
        musicToggleBtn.textContent = "ğŸ”Š éŸ³æ¨‚é–‹";
      } else {
        backgroundMusic.pause();
        musicToggleBtn.textContent = "ğŸ”‡ éŸ³æ¨‚é—œ";
      }
    });

    function startGame() {
      const container = document.getElementById("bottleContainer");
      container.innerHTML = "";
      answered = [];
      score = 0;
      document.getElementById("result").textContent = "";
      document.getElementById("restartButton").style.display = "none";
      document.getElementById("nextButton").style.display = "none";

      for (let i = 0; i < 7; i++) {
        const img = document.createElement("img");
        img.src = "https://bing.com/th/id/BCO.b395f458-242d-4fc4-a524-c7bf45073c8f.png";
        img.className = "bottle";
        img.onclick = () => askQuestion(i, img);
        img.addEventListener("mouseenter", () => {
          hoverSound.currentTime = 0;
          hoverSound.play();
        });
        container.appendChild(img);
      }
    }

    function askQuestion(index, imgEl) {
      if (answered.includes(index)) return;

      const q = questions[index];
      let optionsText = q.options.map((opt, i) => `${String.fromCharCode(65 + i)}. ${opt.text}`).join("\n");
      let answer = prompt(`é¡Œç›® ${index + 1}ï¼š\n${q.question}\n\n${optionsText}\n\nè«‹è¼¸å…¥ A/B/C`);

      if (!answer) return;

      const userChoice = answer.trim().toUpperCase();
      const optIndex = { A: 0, B: 1, C: 2 }[userChoice];

      if (optIndex === undefined) {
        alert("è«‹è¼¸å…¥ Aã€B æˆ– C");
        return;
      }

      const selected = q.options[optIndex];
      if (selected.correct) {
        alert("âœ… ç­”å°äº†ï¼");
        score++;
        imgEl.style.opacity = 0.4;
      } else {
        alert("âŒ ç­”éŒ¯äº†ï¼");
        imgEl.style.opacity = 0.2;
      }

      imgEl.style.pointerEvents = "none";
      answered.push(index);

      if (answered.length === 7) {
        showResult();
      }
    }

    function showResult() {
      const resultEl = document.getElementById("result");
      if (score >= 4) {
        resultEl.textContent = `ğŸ‰ ä½ ç­”å°äº† ${score} é¡Œï¼Œéé—œäº†ï¼`;
        document.getElementById("nextButton").style.display = "inline-block";
      } else {
        resultEl.textContent = `ğŸ˜¢ ä½ åªç­”å°äº† ${score} é¡Œï¼Œè«‹å†æ¥å†å²ï¼`;
      }
      document.getElementById("restartButton").style.display = "inline-block";
    }

    // åˆæ¬¡è¼‰å…¥åŸ·è¡Œä¸€æ¬¡
    startGame();
  </script>
</body>
</html>
