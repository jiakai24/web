<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SDG 6 ç’°å¢ƒæ±¡æŸ“å•ç­”éŠæˆ²</title>
<style>
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: "Noto Sans TC", sans-serif;
    background: url('https://cdn.pixabay.com/photo/2022/04/07/14/31/bottle-7117637_1280.jpg') no-repeat center center fixed;
    background-size: cover;
    display: flex; justify-content: center; align-items: center;
    color: white;
    text-shadow: 1px 1px 3px #000;
  }
  .container {
    background: rgba(0,0,0,0.7);
    padding: 20px 30px;
    border-radius: 10px;
    max-width: 500px;
    width: 90%;
    box-shadow: 0 0 15px #000;
    text-align: center;
  }
  h2 {
    margin-bottom: 20px;
  }
  .question {
    font-size: 1.2em;
    margin-bottom: 20px;
  }
  .option {
    background: rgba(255,255,255,0.1);
    border: 2px solid white;
    border-radius: 8px;
    padding: 12px 18px;
    margin: 10px 0;
    cursor: pointer;
    transition: background 0.3s, color 0.3s;
    user-select: none;
  }
  .option:hover {
    background: rgba(255,255,255,0.3);
  }
  .option.correct {
    background: #4CAF50;
    border-color: #4CAF50;
    color: white;
  }
  .option.wrong {
    background: #F44336;
    border-color: #F44336;
    color: white;
  }
  @keyframes glow {
    0%, 100% {
      box-shadow: 0 0 8px 3px #4CAF50;
    }
    50% {
      box-shadow: 0 0 20px 8px #81C784;
    }
  }
  .option.correct.glow {
    animation: glow 1.2s ease-in-out;
  }
  .result {
    margin-top: 15px;
    font-size: 1.2em;
    font-weight: bold;
    min-height: 1.5em;
  }
  .score {
    margin-top: 10px;
  }
  .btn-restart,
  .btn-next {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 1em;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s;
    color: white;
  }
  .btn-restart {
    background-color: #2196F3;
  }
  .btn-restart:hover {
    background-color: #1976D2;
  }
  .btn-next {
    background-color: #ff9800;
    display: none;
    margin-left: 10px;
  }
  .btn-next:hover {
    background-color: #e68900;
  }
  #musicToggle {
    position: fixed;
    top: 20px;
    left: 20px;
    background-color: #3f51b5;
    color: white;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
  }
</style>
</head>
<body>
  <div class="container">
    <h2>SDG 6 ç’°å¢ƒæ±¡æŸ“å•ç­”éŠæˆ²</h2>
    <div class="question" id="question">å•é¡Œè¼‰å…¥ä¸­...</div>
    <div id="options"></div>
    <div class="result" id="result"></div>
    <div class="score" id="score"></div>
    <button class="btn-restart" id="restartBtn" style="display:none;">é‡æ–°é–‹å§‹</button>
    <button class="btn-next" id="nextBtn" onclick="location.href='game4.html'">ä¸‹ä¸€é—œ</button>
  </div>

  <!-- èƒŒæ™¯éŸ³æ¨‚ -->
  <audio id="backgroundMusic" src="music1.mp3" preload="auto" loop></audio>
  <button id="musicToggle">ğŸ”Š éŸ³æ¨‚é–‹</button>

<script>
  const quizData = [
    {
      question: "ä¸‹åˆ—å“ªä¸€é …è¡Œç‚ºæœ€æœ‰åŠ©æ–¼æ¸›å°‘æ°´è³‡æºçš„æ±¡æŸ“ï¼Ÿ",
      options: [
        { text: "A. éš¨æ„ä¸Ÿæ£„å¡‘è† ç“¶å’Œåƒåœ¾", correct: false },
        { text: "B. å°‡æœ‰å®³åŒ–å­¸ç‰©è³ªç›´æ¥å€’å…¥æ²³å·", correct: false },
        { text: "C. ä½¿ç”¨ç’°ä¿æ¸…æ½”åŠ‘ä¸¦å¦¥å–„è™•ç†åƒåœ¾", correct: true },
        { text: "D. ä¸ç†æœƒå·¥å» æ’æ”¾å»¢æ°´", correct: false },
      ]
    },
    {
      question: "å¡‘è† åƒåœ¾å¦‚æœæœªå¦¥å–„è™•ç†ï¼Œæœƒé€ æˆä»€éº¼ç’°å¢ƒå•é¡Œï¼Ÿ",
      options: [
        { text: "A. æ±¡æŸ“æ°´æºå’Œæµ·æ´‹ç”Ÿç‰©", correct: true },
        { text: "B. å¢åŠ æ¤ç‰©ç”Ÿé•·é€Ÿåº¦", correct: false },
        { text: "C. æ¸›å°‘ç©ºæ°£ä¸­çš„äºŒæ°§åŒ–ç¢³", correct: false },
        { text: "D. æ”¹å–„åœŸå£¤å“è³ª", correct: false },
      ]
    },
    {
      question: "å“ªä¸€ç¨®è¡Œç‚ºæœ‰åŠ©æ–¼ä¿è­·åœ°ä¸‹æ°´è³‡æºï¼Ÿ",
      options: [
        { text: "A. éš¨æ„æ’æ”¾å·¥æ¥­å»¢æ°´", correct: false },
        { text: "B. ç¯€ç´„ç”¨æ°´å’Œé˜²æ­¢æ±¡æŸ“", correct: true },
        { text: "C. å¤§é‡ä½¿ç”¨è¾²è—¥å’ŒåŒ–è‚¥", correct: false },
        { text: "D. å°‡åƒåœ¾ç„šç‡’æ–¼æ²³å·ä¸­", correct: false },
      ]
    },
    {
      question: "é—œæ–¼æ°´æ±¡æŸ“ï¼Œä¸‹åˆ—æ•˜è¿°ä½•è€…æ­£ç¢ºï¼Ÿ",
      options: [
        { text: "A. æ°´æ±¡æŸ“åªæœƒå½±éŸ¿äººé¡å¥åº·", correct: false },
        { text: "B. æ°´æ±¡æŸ“æœƒç ´å£ç”Ÿæ…‹ç³»çµ±å’Œå¹³è¡¡", correct: true },
        { text: "C. æ°´æ±¡æŸ“ä¸æœƒå½±éŸ¿è¾²ä½œç‰©", correct: false },
        { text: "D. æ°´æ±¡æŸ“æ˜¯è‡ªç„¶ç¾è±¡ï¼Œç„¡æ³•é¿å…", correct: false },
      ]
    },
    {
      question: "å¦‚ä½•æ¸›å°‘å¡‘è† æ±¡æŸ“å°æ°´è³‡æºçš„å½±éŸ¿ï¼Ÿ",
      options: [
        { text: "A. å¤šä½¿ç”¨ä¸€æ¬¡æ€§å¡‘è† è£½å“", correct: false },
        { text: "B. æ¨å»£å›æ”¶å’Œæ¸›å°‘å¡‘è† ä½¿ç”¨", correct: true },
        { text: "C. å°‡å¡‘è† åƒåœ¾ä¸Ÿå…¥æ²³æµ", correct: false },
        { text: "D. ä»»ç”±å¡‘è† åƒåœ¾åœ¨è‡ªç„¶ä¸­åˆ†è§£", correct: false },
      ]
    },
  ];

  let currentQuestionIndex = 0;
  let score = 0;
  const questionEl = document.getElementById('question');
  const optionsEl = document.getElementById('options');
  const resultEl = document.getElementById('result');
  const scoreEl = document.getElementById('score');
  const restartBtn = document.getElementById('restartBtn');
  const nextBtn = document.getElementById('nextBtn');
  const backgroundMusic = document.getElementById('backgroundMusic');
  const musicToggleBtn = document.getElementById('musicToggle');

  // å˜—è©¦å¼·åˆ¶æ’­æ”¾éŸ³æ¨‚
  window.addEventListener("load", () => {
    const playPromise = backgroundMusic.play();
    if (playPromise !== undefined) {
      playPromise.catch((error) => {
        console.warn("ç€è¦½å™¨å¯èƒ½é˜»æ­¢äº†è‡ªå‹•æ’­æ”¾:", error);
      });
    }
  });

  // éŸ³æ¨‚é–‹é—œæŒ‰éˆ•é‚è¼¯
  musicToggleBtn.addEventListener("click", () => {
    if (backgroundMusic.paused) {
      backgroundMusic.play();
      musicToggleBtn.textContent = "ğŸ”Š éŸ³æ¨‚é–‹";
    } else {
      backgroundMusic.pause();
      musicToggleBtn.textContent = "ğŸ”‡ éŸ³æ¨‚é—œ";
    }
  });

  function loadQuestion() {
    resultEl.textContent = '';
    const currentQ = quizData[currentQuestionIndex];
    questionEl.textContent = currentQ.question;
    optionsEl.innerHTML = '';

    currentQ.options.forEach((opt) => {
      const optionDiv = document.createElement('div');
      optionDiv.classList.add('option');
      optionDiv.textContent = opt.text;
      optionDiv.dataset.correct = opt.correct;
      optionDiv.addEventListener('click', selectOption);
      optionsEl.appendChild(optionDiv);
    });

    scoreEl.textContent = `ç­”å°é¡Œæ•¸ï¼š${score} / ${quizData.length}`;
  }

  function selectOption(e) {
    const selected = e.target;
    const correct = selected.dataset.correct === 'true';

    if (correct) {
      selected.classList.add('correct', 'glow');
      resultEl.textContent = 'ç­”å°äº†ï¼';
      score++;
      selected.addEventListener('animationend', () => {
        selected.classList.remove('glow');
      }, { once: true });
    } else {
      selected.classList.add('wrong');
      resultEl.textContent = 'ç­”éŒ¯äº†ï¼';
    }

    Array.from(optionsEl.children).forEach(option => {
      option.removeEventListener('click', selectOption);
      if (option.dataset.correct === 'true') {
        option.classList.add('correct');
      }
      option.style.pointerEvents = 'none';
    });

    scoreEl.textContent = `ç­”å°é¡Œæ•¸ï¼š${score} / ${quizData.length}`;

    setTimeout(() => {
      currentQuestionIndex++;
      if (currentQuestionIndex < quizData.length) {
        loadQuestion();
      } else {
        showFinalResult();
      }
    }, 1500);
  }

  function showFinalResult() {
    questionEl.textContent = "éŠæˆ²çµæŸï¼";
    optionsEl.innerHTML = '';
    if (score >= 3) {
      resultEl.textContent = `æ­å–œä½ ï¼ç­”å°äº† ${score} é¡Œï¼Œç²å¾—å‹åˆ©ï¼ğŸ‰`;
      nextBtn.style.display = 'inline-block';
    } else {
      resultEl.textContent = `ä½ ç­”å°äº† ${score} é¡Œï¼Œå†æ¥å†å²ï¼`;
    }
    scoreEl.textContent = '';
    restartBtn.style.display = 'inline-block';
  }

  restartBtn.addEventListener('click', () => {
    currentQuestionIndex = 0;
    score = 0;
    restartBtn.style.display = 'none';
    nextBtn.style.display = 'none';
    loadQuestion();
  });

  loadQuestion();
</script>
</body>
</html>
